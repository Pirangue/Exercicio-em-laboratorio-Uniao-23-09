-- Tabela PROPRIETARIO (superclasse)
CREATE TABLE PROPRIETARIO (
    Id_proprietario INT PRIMARY KEY AUTO_INCREMENT
);

-- Tabela PESSOA (especialização de PROPRIETARIO)
CREATE TABLE PESSOA (
    Id_proprietario INT PRIMARY KEY,
    Nome VARCHAR(100) NOT NULL,
    Cpf VARCHAR(11) NOT NULL UNIQUE,
    Endereco VARCHAR(200),
    Num_cartera_motorista VARCHAR(20) NOT NULL,
    FOREIGN KEY (Id_proprietario) REFERENCES PROPRIETARIO(Id_proprietario)
);

-- Tabela BANCO (especialização de PROPRIETARIO)
CREATE TABLE BANCO (
    Id_proprietario INT PRIMARY KEY,
    Nome_banco VARCHAR(100) NOT NULL,
    Endereco_banco VARCHAR(200),
    FOREIGN KEY (Id_proprietario) REFERENCES PROPRIETARIO(Id_proprietario)
);

-- Tabela EMPRESA (especialização de PROPRIETARIO)
CREATE TABLE EMPRESA (
    Id_proprietario INT PRIMARY KEY,
    Nome_empresa VARCHAR(100) NOT NULL,
    Endereco_empresa VARCHAR(200),
    FOREIGN KEY (Id_proprietario) REFERENCES PROPRIETARIO(Id_proprietario)
);

-- Tabela VEICULO_REGISTRADO (superclasse)
CREATE TABLE VEICULO_REGISTRADO (
    Placa VARCHAR(10) PRIMARY KEY,
    Cod_veiculo VARCHAR(20) NOT NULL UNIQUE
);

-- Tabela CARRO (especialização de VEICULO_REGISTRADO)
CREATE TABLE CARRO (
    Placa VARCHAR(10) PRIMARY KEY,
    Marca_carro VARCHAR(50),
    Modelo_carro VARCHAR(50),
    Ano_carro INT,
    Estilo VARCHAR(30),
    FOREIGN KEY (Placa) REFERENCES VEICULO_REGISTRADO(Placa)
);

-- Tabela CAMINHAO (especialização de VEICULO_REGISTRADO)
CREATE TABLE CAMINHAO (
    Placa VARCHAR(10) PRIMARY KEY,
    Marca_caminhao VARCHAR(50),
    Modelo_caminhao VARCHAR(50),
    Ano_caminhao INT,
    Capacidade_peso DECIMAL(10,2),
    FOREIGN KEY (Placa) REFERENCES VEICULO_REGISTRADO(Placa)
);

-- Tabela E_DONO (associativa - relacionamento M:N)
CREATE TABLE E_DONO (
    Id_proprietario INT,
    Placa VARCHAR(10),
    Data_compra DATE NOT NULL,
    Alienado_ou_regular VARCHAR(20) NOT NULL,
    PRIMARY KEY (Id_proprietario, Placa),
    FOREIGN KEY (Id_proprietario) REFERENCES PROPRIETARIO(Id_proprietario),
    FOREIGN KEY (Placa) REFERENCES VEICULO_REGISTRADO(Placa)
);
